# 04 予約画面UI/UX・ロジック設計（医療系）

## 基本方針

- **日付×時間帯単位**で細かく予約可能（月単位ではない）
- ユーザーが**一目で予約可否**を判断できるUI
- **整合性・安全性**を最優先（医療機関向け）
- **病院らしい安心感**のあるデザイン

---

## 時間枠表示仕様

| 記号 | 意味 | クリック |
|------|------|----------|
| ○ | 予約可能（その時間に空いている担当医が2名以上） | 可能 |
| △ | 残りわずか（その時間に空いている担当医が1名のみ） | 可能 |
| × | 予約不可（勤務外または満枠） | 不可 |

- **担当医ごとに縦 or 横**で時間枠を分けて表示（例: 行=担当医、列=時間）
- ユーザーは**空いている時間枠のみ**クリック可能（○と△のみ）
- 担当医は**ユーザーが直接選ばない**。空いている担当医が**自動割当**。UI上では「どの医師がどの時間に空いているか」を明示。

---

## 予約目的

- 表示は**最小限の代表的な選択肢**のみ
  - **初診** / **再診** / **予防接種** / **その他**
- その他の目的は「その他」に集約
- 初診・再診によって予約可能時間帯を制限してもよい（実装は任意）

---

## 確認ボタン制御（超重要）

確認ボタンは以下の**すべて**を満たすまで**無効**。

1. 日付が選択されている
2. 時間枠が選択されている
3. 割り当て可能な担当医が存在する（選択時間に空きあり）
4. 担当医の勤務時間と選択時間が一致している

→ **1つでも満たさない場合は押せない**（disabled + グレー表示）

---

## UI/UXルール

- **予約ボタンは画面下部に固定**
- 未完了: disabled + グレー表示
- 完了条件を満たしたら: 有効化 + 強調色
- **エラーメッセージは即時表示**（後出しNG）

---

## デザイン要件

- 病院らしい配色: **白・淡いブルー・グリーン**
- 角丸・余白を十分に
- 情報過多にしない**段階的表示**
- **スマホ利用を前提**

---

## 実装上の注意

- state の整合性を常にチェック
- 不正な状態（空きなし・時間不一致）で**予約処理が走らない**ように guard clause
- **UI とロジックを分離**（availability.js / reservation.js に集約）

---

## ネガティブプロンプト（禁止事項）

- 担当医の空きがないのに予約確定できる実装
- 確認ボタンが条件未達でも押せるUI
- 予約不可なのにクリックできる時間枠
- 状態が曖昧なまま画面遷移する実装
- 派手なデザイン
- ロジック説明なしのコード生成
